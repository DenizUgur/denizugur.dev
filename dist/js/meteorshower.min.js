!function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};window.requestAnimationFrame=t}();var gyro={x:0,y:0,zero:{x:0,y:0},limit:{x:0,y:0},calibrated:!1},extraRoom=1e3,movement={acc:6.5,mouse:.0055};window.DeviceMotionEvent&&!matchMedia("(pointer:fine)").matches?window.addEventListener("devicemotion",function(t){if(gyro.x=-Math.round(10*t.accelerationIncludingGravity.x)/100*movement.acc,gyro.y=-Math.round(10*t.accelerationIncludingGravity.y)/100*movement.acc,gyro.calibrated||(gyro.zero.x=gyro.x,gyro.zero.y=gyro.y,gyro.calibrated=!0),gyro.x=gyro.x<gyro.zero.x?-1*Math.abs(gyro.x-gyro.zero.x):Math.abs(gyro.x-gyro.zero.x),gyro.y=gyro.y<gyro.zero.y?-1*Math.abs(gyro.y-gyro.zero.y):Math.abs(gyro.y-gyro.zero.y),window.innerWidth>window.innerHeight){var i=gyro.x;gyro.x=gyro.y,gyro.y=i}},!1):window.addEventListener("mousemove",function(t){gyro.x=(t.clientX-window.innerWidth/2)*movement.mouse,gyro.y=(window.innerHeight/2-t.clientY)*movement.mouse}),$("body").on("click",function(){gyro.calibrated=!1});var background=document.getElementById("bgCanvas"),bgCtx=background.getContext("2d"),width=window.innerWidth,height=document.body.offsetHeight;function Star(t){this.size=2*Math.random(),this.x=t.x,this.y=t.y}function ShootingStar(){this.reset()}function mult(t,i,e){var o=6*Math.abs(t)/8+2;return(o=t*(i/2)*(o=o<6?o:5.99)/Math.log10(e))<.08&&o>-.08&&(o=.08*Math.sign(o)),o}height<400&&(height=400),width+=extraRoom,height+=extraRoom,gyro.limit={x:width/2,y:height/2},background.width=width,background.height=height,bgCtx.fillStyle="#1d195d",bgCtx.fillRect(0,0,width,height),Star.prototype.update=function(){gyro.limit.x<width&&gyro.limit.x>0&&(this.x-=mult(gyro.x,this.size,width)),gyro.limit.y<height&&gyro.limit.y>0&&(this.y+=mult(gyro.y,this.size,height)),bgCtx.fillRect(this.x,this.y,this.size,this.size)},ShootingStar.prototype.reset=function(){this.x=Math.random()*width,this.y=0,this.len=80*Math.random()+10,this.speed=10*Math.random()+6,this.size=1*Math.random()+.1,this.waitTime=(new Date).getTime()+3e3*Math.random()+500,this.active=!1},ShootingStar.prototype.update=function(){this.active?(this.x-=this.speed,this.y+=this.speed,this.x<0||this.y>=height?this.reset():(bgCtx.lineWidth=this.size,bgCtx.beginPath(),bgCtx.moveTo(this.x,this.y),bgCtx.lineTo(this.x+this.len,this.y-this.len),bgCtx.stroke())):this.waitTime<(new Date).getTime()&&(this.active=!0)};for(var entities=[],i=0;i<height+gyro.limit.y;i++)entities.push(new Star({x:Math.random()*(width+gyro.limit.x)-gyro.limit.x,y:Math.random()*(height+gyro.limit.y)-gyro.limit.y}));function animate(){bgCtx.fillStyle="#05004c",bgCtx.fillRect(0,0,width,height),bgCtx.fillStyle="#ffffff",bgCtx.strokeStyle="#ffffff";var t=entities.length;for(gyro.limit.x+=mult(gyro.x,2,width),gyro.limit.y-=mult(gyro.y,2,height),gyro.limit.x>width?gyro.limit.x=width:gyro.limit.x<0&&(gyro.limit.x=0),gyro.limit.y>height?gyro.limit.y=height:gyro.limit.y<0&&(gyro.limit.y=0);t--;)entities[t].update();requestAnimationFrame(animate)}entities.push(new ShootingStar),entities.push(new ShootingStar),entities.push(new ShootingStar),animate();